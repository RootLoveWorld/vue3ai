# 一、本地开发服务
‌项目初始化‌：读取并解析vite.config.js配置文件。
‌服务启动‌：基于Express启动HTTP服务器。
‌模块处理‌：通过原生ESM实现模块即时加载，无需预打包。
‌开发增强‌：支持热模块替换（HMR，WebSocket实现局部更新）和自动生成Source Maps（便于调试）。
# 二、构建过程
‌项目初始化‌：读取并解析vite.config.js配置文件。
‌核心流程‌：
入口解析：基于Rollup进行模块依赖解析。
插件处理：通过插件链完成代码转换、压缩等资源处理。
优化策略：执行Tree Shaking（移除未使用代码）和代码拆分（分割为多个模块）。
输出打包：生成最终产物并优化资源（如CSS内联/提取、静态资源管理）。


## 插件系统
- 插件协议
- 插件基座
- 插件执行



---------
Vite 开发阶段使用 esbuild 构建，生产阶段使用 Rollup 打包，主要基于两者在功能、性能和适用场景上的差异：

## 开发阶段使用 esbuild
- ‌速度优势‌：esbuild 采用 Go 语言编写，支持并行编译，构建速度比 Rollup 快 10-100 倍，显著提升开发体验。 ‌

- ‌即时反馈‌：高频代码修改时，esbuild 能快速完成模块解析和转换，减少等待时间。 ‌

## 生产阶段使用 Rollup
- ‌优化能力‌：Rollup 支持 Tree-shaking（精准剔除未使用代码）、代码拆分和异步加载，生成更小、更优化的生产包。 ‌

- ‌生态兼容‌：Vite 继承了 Rollup 的插件生态，可直接复用其代码拆分、静态资源处理等生产级功能。